<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Onboarding - KaryaSetu</title>
    <link rel="stylesheet" href="../css/theme.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="onboarding.css">
</head>

<body>
    <div class="onboarding-container gradient-mesh">
        <div class="onboarding-card card-glass">
            <div class="onboarding-header">
                <div class="logo">
                    <span class="logo-icon">ðŸ”§</span>
                    <span class="logo-text">KaryaSetu</span>
                </div>
                <h1>Tell us about yourself</h1>
                <p>Help us personalize your experience</p>
            </div>

            <form class="onboarding-form" id="customerOnboardingForm">
                <div class="input-group">
                    <label class="input-label">Location</label>
                    <input type="text" class="input-field" id="location" placeholder="Enter your city" required>
                </div>

                <div class="input-group">
                    <label class="input-label">Address</label>
                    <textarea class="input-field" id="address" rows="3" placeholder="Enter your full address"
                        required></textarea>
                </div>

                <div class="input-group">
                    <label class="input-label">Pincode</label>
                    <input type="text" class="input-field" id="pincode" placeholder="Enter pincode" pattern="[0-9]{6}"
                        required>
                </div>

                <button type="submit" class="btn btn-primary btn-lg">Complete Setup</button>
            </form>
        </div>
    </div>

    <script src="../js/utils.js"></script>
    <script>
        // Check if user is logged in
        const userData = Storage.get('karyasetu_user');
        if (!userData || !userData.loggedIn) {
            window.location.href = '../auth/login.html';
        }

        document.getElementById('customerOnboardingForm').addEventListener('submit', (e) => {
            e.preventDefault();

            const profile = {
                location: document.getElementById('location').value,
                address: document.getElementById('address').value,
                pincode: document.getElementById('pincode').value,
                role: 'customer',
                createdAt: new Date().toISOString()
            };

            Storage.set('karyasetu_user_profile', profile);
            showToast('Profile created successfully!', 'success');

            setTimeout(() => {
                window.location.href = '../dashboard/dashboard.html';
            }, 1000);
        });
    </script>
</body>

</html>